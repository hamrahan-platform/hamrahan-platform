const ke="modulepreload",Se=function(_){return"/"+_},se={},Ie=function(l,b,A){if(!b||b.length===0)return l();const a=document.getElementsByTagName("link");return Promise.all(b.map(h=>{if(h=Se(h),h in se)return;se[h]=!0;const y=h.endsWith(".css"),f=y?'[rel="stylesheet"]':"";if(!!A)for(let T=a.length-1;T>=0;T--){const k=a[T];if(k.href===h&&(!y||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${f}`))return;const d=document.createElement("link");if(d.rel=y?"stylesheet":ke,y||(d.as="script",d.crossOrigin=""),d.href=h,document.head.appendChild(d),y)return new Promise((T,k)=>{d.addEventListener("load",T),d.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})})).then(()=>l())};function Oe(_={}){const{immediate:l=!1,onNeedRefresh:b,onOfflineReady:A,onRegistered:a,onRegisteredSW:h,onRegisterError:y}=_;let f,M,d;const T=async(x=!0)=>{await M,await d?.()};async function k(){if("serviceWorker"in navigator){const{Workbox:x}=await Ie(()=>import("./workbox-window.prod.es5.a7b12eab.js"),[]);f=new x("/sw.js",{scope:"/",type:"classic"}),d=async()=>{await f?.messageSkipWaiting()};{let C=!1;const S=()=>{C=!0,f?.addEventListener("controlling",I=>{I.isUpdate&&window.location.reload()}),b?.()};f.addEventListener("installed",I=>{typeof I.isUpdate>"u"?typeof I.isExternal<"u"?I.isExternal?S():!C&&A?.():I.isExternal?window.location.reload():!C&&A?.():I.isUpdate||A?.()}),f.addEventListener("waiting",S),f.addEventListener("externalwaiting",S)}f.register({immediate:l}).then(C=>{h?h("/sw.js",C):a?.(C)}).catch(C=>{y?.(C)})}}return M=k(),T}Oe({immediate:!0,onRegisteredSW(_){console.log("SW registered: ",_)},onOfflineReady(){console.log("PWA application ready to work offline")}});localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");window.dataLayer=window.dataLayer||[];function le(){dataLayer.push(arguments)}le("js",new Date);le("config","G-E467EPR2TW");(function(){var _={},l="";try{l=location.hash.toString()}catch{}var b=M(l),A=J("initParams");if(A)for(var a in A)typeof b[a]>"u"&&(b[a]=A[a]);N("initParams",b);var h=!1,y;try{if(h=window.parent!=null&&window!=window.parent,h){window.addEventListener("message",function(o){if(o.source===window.parent){try{var s=JSON.parse(o.data)}catch{return}!s||!s.eventType||(s.eventType=="set_custom_style"?y.innerHTML=s.eventData:x(s.eventType,s.eventData))}}),y=document.createElement("style"),document.head.appendChild(y);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready"}),"*")}catch{}}}catch{}function f(o){try{return o=o.replace(/\+/g,"%20"),decodeURIComponent(o)}catch{return o}}function M(o){o=o.replace(/^#/,"");var s={};if(!o.length)return s;if(o.indexOf("=")<0&&o.indexOf("?")<0)return s._path=f(o),s;var u=o.indexOf("?");if(u>=0){var g=o.substr(0,u);s._path=f(g),o=o.substr(u+1)}var W=d(o);for(var L in W)s[L]=W[L];return s}function d(o){var s={};if(!o.length)return s;var u=o.split("&"),g,W,L,H;for(g=0;g<u.length;g++)W=u[g].split("="),L=f(W[0]),H=W[1]==null?null:f(W[1]),s[L]=H;return s}function T(o,s){var u=o.indexOf("#");if(u<0)return o+"#"+s;var g=o.substr(u+1);return g.indexOf("=")>=0||g.indexOf("?")>=0?o+"&"+s:g.length>0?o+"?"+s:o+s}function k(o,s,u){if(s||(s=function(){}),u===void 0&&(u=""),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(o,JSON.stringify(u)),s();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:o,eventData:u})),s();else if(h)try{var g="https://web.telegram.org";g="*",window.parent.postMessage(JSON.stringify({eventType:o,eventData:u}),g),b.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent via postMessage",o,u),s()}catch(W){s(W)}else b.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent",o,u),s({notAvailable:!0})}function x(o,s){C(o,function(u){u(o,s)})}function C(o,s){var u=_[o];if(!(u===void 0||!u.length))for(var g=0;g<u.length;g++)try{s(u[g])}catch{}}function S(o,s){_[o]===void 0&&(_[o]=[]);var u=_[o].indexOf(s);u===-1&&_[o].push(s)}function I(o,s){if(_[o]!==void 0){var u=_[o].indexOf(s);u!==-1&&_[o].splice(u,1)}}function N(o,s){try{return window.sessionStorage.setItem("__telegram__"+o,JSON.stringify(s)),!0}catch{}return!1}function J(o){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+o))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:b,isIframe:h,onEvent:S,offEvent:I,postEvent:k,receiveEvent:x,callEventCallbacks:C},window.Telegram.Utils={urlSafeDecode:f,urlParseQueryString:d,urlParseHashParams:M,urlAppendHashParams:T,sessionStorageSet:N,sessionStorageGet:J},window.TelegramGameProxy_receiveEvent=x,window.TelegramGameProxy={receiveEvent:x}})();(function(){var _=window.Telegram.Utils,l=window.Telegram.WebView,b=l.initParams,A=l.isIframe,a={},h="",y={},f={},M="light",d="6.0",T="unknown";if(b.tgWebAppData&&b.tgWebAppData.length){h=b.tgWebAppData,y=_.urlParseQueryString(h);for(var k in y){var x=y[k];try{(x.substr(0,1)=="{"&&x.substr(-1)=="}"||x.substr(0,1)=="["&&x.substr(-1)=="]")&&(y[k]=JSON.parse(x))}catch{}}}if(b.tgWebAppThemeParams&&b.tgWebAppThemeParams.length){var C=b.tgWebAppThemeParams;try{var S=JSON.parse(C);S&&G(S)}catch{}}var S=_.sessionStorageGet("themeParams");S&&G(S),b.tgWebAppVersion&&(d=b.tgWebAppVersion),b.tgWebAppPlatform&&(T=b.tgWebAppPlatform);function I(e,t){t.theme_params&&(G(t.theme_params),window.Telegram.WebApp.MainButton.setParams({}),Z(),g("themeChanged"))}var N=window.innerHeight;function J(e,t){t.height&&(window.removeEventListener("resize",o),K(t))}function o(e){N!=window.innerHeight&&(N=window.innerHeight,g("viewportChanged",{isStateStable:!0}))}function s(e){if(!(e.metaKey||e.ctrlKey)){for(var t=e.target;t.tagName!="A"&&t.parentNode;)t=t.parentNode;t.tagName=="A"&&t.target!="_blank"&&(t.protocol=="http:"||t.protocol=="https:")&&t.hostname=="t.me"&&(a.openTgLink(t.href),e.preventDefault())}}function u(e){return e.toString().replace(/^\s+|\s+$/g,"")}function g(e){var t=Array.prototype.slice.call(arguments);e=t.shift(),l.callEventCallbacks("webview:"+e,function(r){r.apply(a,t)})}function W(e,t){l.onEvent("webview:"+e,t)}function L(e,t){l.offEvent("webview:"+e,t)}function H(e,t){var r=document.documentElement;r&&r.style&&r.style.setProperty&&r.style.setProperty("--tg-"+e,t)}function G(e){e.bg_color=="#1c1c1d"&&e.bg_color==e.secondary_bg_color&&(e.secondary_bg_color="#2c2c2e");var t;for(var r in e)(t=V(e[r]))&&(f[r]=t,r=="bg_color"&&(M=ge(t)?"dark":"light",H("color-scheme",M)),r="theme-"+r.split("_").join("-"),H(r,t));_.sessionStorageSet("themeParams",f)}function pe(e){for(var t="",r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=r.length,c=0;c<e;c++)t+=r[Math.floor(Math.random()*n)];return t}var R=!1,q=!1,ee=!0;function K(e){typeof e<"u"&&(ee=!!e.is_expanded,R=e.height,e.is_state_stable&&(q=e.height),g("viewportChanged",{isStateStable:!!e.is_state_stable}));var t,r;R!==!1?t=R-O+"px":t=O?"calc(100vh - "+O+"px)":"100vh",q!==!1?r=q-O+"px":r=O?"calc(100vh - "+O+"px)":"100vh",H("viewport-height",t),H("viewport-stable-height",r)}var X=!1;function ue(e){if(!P("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+d);return}X=!!e,l.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:X})}var te="bg_color";function ce(){return f[te]||null}function fe(e){if(!P("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+d);return}var t;if(e=="bg_color"||e=="secondary_bg_color"?t=e:(t=V(e),f.bg_color&&f.bg_color==t?t="bg_color":f.secondary_bg_color&&f.secondary_bg_color==t?t="secondary_bg_color":t=!1),t!="bg_color"&&t!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",e),Error("WebAppHeaderColorKeyInvalid");te=t,l.postEvent("web_app_set_header_color",!1,{color_key:t})}var $="bg_color";function re(){return $=="secondary_bg_color"?f.secondary_bg_color:$=="bg_color"?f.bg_color:$}function de(e){if(!P("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+d);return}var t;if(e=="bg_color"||e=="secondary_bg_color")t=e;else if(t=V(e),!t)throw console.error("[Telegram.WebApp] Background color format is invalid",e),Error("WebAppBackgroundColorInvalid");$=t,Z()}var ne=null;function Z(){var e=re();ne!=e&&(ne=e,l.postEvent("web_app_set_background_color",!1,{color:e}))}function V(e){e+="";var t;if(t=/^\s*#([0-9a-f]{6})\s*$/i.exec(e))return"#"+t[1].toLowerCase();if(t=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(e))return("#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]).toLowerCase();if(t=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(e)){var r=parseInt(t[1]),n=parseInt(t[2]),c=parseInt(t[3]);return r=(r<16?"0":"")+r.toString(16),n=(n<16?"0":"")+n.toString(16),c=(c<16?"0":"")+c.toString(16),"#"+r+n+c}return!1}function ge(e){e=e.replace(/[\s#]/g,""),e.length==3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16),c=Math.sqrt(.299*(t*t)+.587*(r*r)+.114*(n*n));return c<120}function be(e,t){typeof e!="string"&&(e=""),typeof t!="string"&&(t=""),e=e.replace(/^\s+|\s+$/g,"").split("."),t=t.replace(/^\s+|\s+$/g,"").split(".");var r=Math.max(e.length,t.length),n,c,w;for(n=0;n<r;n++)if(c=parseInt(e[n])||0,w=parseInt(t[n])||0,c!=w)return c>w?1:-1;return 0}function P(e){return be(d,e)>=0}function ve(e){if(window.Blob)try{return new Blob([e]).size}catch{}for(var t=e.length,r=e.length-1;r>=0;r--){var n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}var me=function(){var e=!1,t={};Object.defineProperty(t,"isVisible",{set:function(v){m({is_visible:v})},get:function(){return e},enumerable:!0});var r=null;l.onEvent("back_button_pressed",n);function n(){g("backButtonClicked")}function c(){return{is_visible:e}}function w(v){return typeof v>"u"&&(v=c()),JSON.stringify(v)}function p(){return P("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+d),!1)}function B(){var v=c(),E=w(v);r!==E&&(r=E,l.postEvent("web_app_setup_back_button",!1,v))}function m(v){return p()&&(typeof v.is_visible<"u"&&(e=!!v.is_visible),B()),t}return t.onClick=function(v){return p()&&W("backButtonClicked",v),t},t.offClick=function(v){return p()&&L("backButtonClicked",v),t},t.show=function(){return m({is_visible:!0})},t.hide=function(){return m({is_visible:!1})},t}(),O=0,he=function(){var e=!1,t=!0,r=!1,n="CONTINUE",c=!1,w=!1,p={};Object.defineProperty(p,"text",{set:function(i){p.setParams({text:i})},get:function(){return n},enumerable:!0}),Object.defineProperty(p,"color",{set:function(i){p.setParams({color:i})},get:function(){return c||f.button_color||"#2481cc"},enumerable:!0}),Object.defineProperty(p,"textColor",{set:function(i){p.setParams({text_color:i})},get:function(){return w||f.button_text_color||"#ffffff"},enumerable:!0}),Object.defineProperty(p,"isVisible",{set:function(i){p.setParams({is_visible:i})},get:function(){return e},enumerable:!0}),Object.defineProperty(p,"isProgressVisible",{get:function(){return r},enumerable:!0}),Object.defineProperty(p,"isActive",{set:function(i){p.setParams({is_active:i})},get:function(){return t},enumerable:!0});var B=null;l.onEvent("main_button_pressed",j);var m=null,v={};if(b.tgWebAppDebug){m=document.createElement("tg-main-button"),v={font:"600 14px/18px sans-serif",display:"none",width:"100%",height:"48px",borderRadius:"0",background:"no-repeat right center",position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"15px 20px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var E in v)m.style[E]=v[E];document.addEventListener("DOMContentLoaded",function i(D){document.removeEventListener("DOMContentLoaded",i),document.body.appendChild(m),m.addEventListener("click",j,!1)})}function j(){t&&g("mainButtonClicked")}function oe(){var i=p.color,D=p.textColor;return e?{is_visible:!0,is_active:t,is_progress_visible:r,text:n,color:i,text_color:D}:{is_visible:!1}}function xe(i){return typeof i>"u"&&(i=oe()),JSON.stringify(i)}function Y(){var i=oe(),D=xe(i);B!==D&&(B=D,l.postEvent("web_app_setup_main_button",!1,i),b.tgWebAppDebug&&Ce(i))}function Ce(i){i.is_visible?(m.style.display="block",O=48,m.style.opacity=i.is_active?"1":"0.8",m.style.cursor=i.is_active?"pointer":"auto",m.disabled=!i.is_active,m.innerText=i.text,m.style.backgroundImage=i.is_progress_visible?"url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewport%3D%220%200%2048%2048%22%20width%3D%2248px%22%20height%3D%2248px%22%3E%3Ccircle%20cx%3D%2250%25%22%20cy%3D%2250%25%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222.25%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%20stroke-dashoffset%3D%22106%22%20r%3D%229%22%20stroke-dasharray%3D%2256.52%22%20rotate%3D%22-90%22%3E%3Canimate%20attributeName%3D%22stroke-dashoffset%22%20attributeType%3D%22XML%22%20dur%3D%22360s%22%20from%3D%220%22%20to%3D%2212500%22%20repeatCount%3D%22indefinite%22%3E%3C%2Fanimate%3E%3CanimateTransform%20attributeName%3D%22transform%22%20attributeType%3D%22XML%22%20type%3D%22rotate%22%20dur%3D%221s%22%20from%3D%22-90%2024%2024%22%20to%3D%22630%2024%2024%22%20repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fcircle%3E%3C%2Fsvg%3E')":"none",m.style.backgroundColor=i.color,m.style.color=i.text_color):(m.style.display="none",O=0),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=O+"px"),K()}function Te(i){if(typeof i.text<"u"){var D=u(i.text);if(!D.length)throw console.error("[Telegram.WebApp] Main button text is required",i.text),Error("WebAppMainButtonParamInvalid");if(D.length>64)throw console.error("[Telegram.WebApp] Main button text is too long",D),Error("WebAppMainButtonParamInvalid");n=D}if(typeof i.color<"u")if(i.color===!1||i.color===null)c=!1;else{var ie=V(i.color);if(!ie)throw console.error("[Telegram.WebApp] Main button color format is invalid",i.color),Error("WebAppMainButtonParamInvalid");c=ie}if(typeof i.text_color<"u")if(i.text_color===!1||i.text_color===null)w=!1;else{var ae=V(i.text_color);if(!ae)throw console.error("[Telegram.WebApp] Main button text color format is invalid",i.text_color),Error("WebAppMainButtonParamInvalid");w=ae}if(typeof i.is_visible<"u"){if(i.is_visible&&!p.text.length)throw console.error("[Telegram.WebApp] Main button text is required"),Error("WebAppMainButtonParamInvalid");e=!!i.is_visible}return typeof i.is_active<"u"&&(t=!!i.is_active),Y(),p}return p.setText=function(i){return p.setParams({text:i})},p.onClick=function(i){return W("mainButtonClicked",i),p},p.offClick=function(i){return L("mainButtonClicked",i),p},p.show=function(){return p.setParams({is_visible:!0})},p.hide=function(){return p.setParams({is_visible:!1})},p.enable=function(){return p.setParams({is_active:!0})},p.disable=function(){return p.setParams({is_active:!1})},p.showProgress=function(i){return t=!!i,r=!0,Y(),p},p.hideProgress=function(){return p.isActive||(t=!0),r=!1,Y(),p},p.setParams=Te,p}();function we(){g("settingsButtonClicked")}l.onEvent("settings_button_pressed",we);var _e=function(){var e={};function t(r){if(!P("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+d),e;if(r.type=="impact"){if(r.impact_style!="light"&&r.impact_style!="medium"&&r.impact_style!="heavy"&&r.impact_style!="rigid"&&r.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",r.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(r.type=="notification"){if(r.notification_type!="error"&&r.notification_type!="success"&&r.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",r.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(r.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",r.type),Error("WebAppHapticFeedbackTypeInvalid");return l.postEvent("web_app_trigger_haptic_feedback",!1,r),e}return e.impactOccurred=function(r){return t({type:"impact",impact_style:r})},e.notificationOccurred=function(r){return t({type:"notification",notification_type:r})},e.selectionChanged=function(){return t({type:"selection_change"})},e}(),F={};function ye(e,t){if(t.slug&&F[t.slug]){var r=F[t.slug];delete F[t.slug],r.callback&&r.callback(t.status),g("invoiceClosed",{url:r.url,status:t.status})}}var Q=!1;function Ee(e,t){if(Q){var r=Q;Q=!1;var n=null;typeof t.button_id<"u"&&(n=t.button_id),r.callback&&r.callback(n),g("popupClosed",{button_id:n})}}var U=!1;function Ae(e,t){if(U){var r=U,n=null;typeof t.data<"u"&&(n=t.data),r.callback&&r.callback(n)&&(U=!1,l.postEvent("web_app_close_scan_qr_popup",!1)),g("qrTextReceived",{data:n})}}function Pe(e,t){U=!1}var z={};function We(e,t){if(t.req_id&&z[t.req_id]){var r=z[t.req_id];delete z[t.req_id];var n=null;typeof t.data<"u"&&(n=t.data),r.callback&&r.callback(n),g("clipboardTextReceived",{data:n})}}window.Telegram||(window.Telegram={}),Object.defineProperty(a,"initData",{get:function(){return h},enumerable:!0}),Object.defineProperty(a,"initDataUnsafe",{get:function(){return y},enumerable:!0}),Object.defineProperty(a,"version",{get:function(){return d},enumerable:!0}),Object.defineProperty(a,"platform",{get:function(){return T},enumerable:!0}),Object.defineProperty(a,"colorScheme",{get:function(){return M},enumerable:!0}),Object.defineProperty(a,"themeParams",{get:function(){return f},enumerable:!0}),Object.defineProperty(a,"isExpanded",{get:function(){return ee},enumerable:!0}),Object.defineProperty(a,"viewportHeight",{get:function(){return(R===!1?window.innerHeight:R)-O},enumerable:!0}),Object.defineProperty(a,"viewportStableHeight",{get:function(){return(q===!1?window.innerHeight:q)-O},enumerable:!0}),Object.defineProperty(a,"isClosingConfirmationEnabled",{set:function(e){ue(e)},get:function(){return X},enumerable:!0}),Object.defineProperty(a,"headerColor",{set:function(e){fe(e)},get:function(){return ce()},enumerable:!0}),Object.defineProperty(a,"backgroundColor",{set:function(e){de(e)},get:function(){return re()},enumerable:!0}),Object.defineProperty(a,"BackButton",{value:me,enumerable:!0}),Object.defineProperty(a,"MainButton",{value:he,enumerable:!0}),Object.defineProperty(a,"HapticFeedback",{value:_e,enumerable:!0}),a.setHeaderColor=function(e){a.headerColor=e},a.setBackgroundColor=function(e){a.backgroundColor=e},a.enableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!0},a.disableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!1},a.isVersionAtLeast=function(e){return P(e)},a.onEvent=function(e,t){W(e,t)},a.offEvent=function(e,t){L(e,t)},a.sendData=function(e){if(!e||!e.length)throw console.error("[Telegram.WebApp] Data is required",e),Error("WebAppDataInvalid");if(ve(e)>4096)throw console.error("[Telegram.WebApp] Data is too long",e),Error("WebAppDataInvalid");l.postEvent("web_app_data_send",!1,{data:e})},a.switchInlineQuery=function(e,t){if(!P("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+d),Error("WebAppMethodUnsupported");if(!b.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(e=e||"",e.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",e),Error("WebAppInlineQueryInvalid");var r=[];if(t){if(!Array.isArray(t))throw console.error("[Telegram.WebApp] Choose chat types should be an array",t),Error("WebAppInlineChooseChatTypesInvalid");for(var n={users:1,bots:1,groups:1,channels:1},c=0;c<t.length;c++){var w=t[c];if(!n[w])throw console.error("[Telegram.WebApp] Choose chat type is invalid",w),Error("WebAppInlineChooseChatTypeInvalid");n[w]!=2&&(n[w]=2,r.push(w))}}l.postEvent("web_app_switch_inline_query",!1,{query:e,chat_types:r})},a.openLink=function(n,t){var r=document.createElement("A");if(r.href=n,r.protocol!="http:"&&r.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",n),Error("WebAppTgUrlInvalid");var n=r.href;t=t||{},P("6.1")?l.postEvent("web_app_open_link",!1,{url:n,try_instant_view:P("6.4")&&!!t.try_instant_view}):window.open(n,"_blank")},a.openTelegramLink=function(e){var t=document.createElement("A");if(t.href=e,t.protocol!="http:"&&t.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",e),Error("WebAppTgUrlInvalid");if(t.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",e),Error("WebAppTgUrlInvalid");var r=t.pathname+t.search;A||P("6.1")?l.postEvent("web_app_open_tg_link",!1,{path_full:r}):location.href="https://t.me"+r},a.openInvoice=function(e,t){var r=document.createElement("A"),n,c;if(r.href=e,r.protocol!="http:"&&r.protocol!="https:"||r.hostname!="t.me"||!(n=r.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(c=n[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",e),Error("WebAppInvoiceUrlInvalid");if(!P("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+d),Error("WebAppMethodUnsupported");if(F[c])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");F[c]={url:e,callback:t},l.postEvent("web_app_open_invoice",!1,{slug:c})},a.showPopup=function(e,t){if(!P("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+d),Error("WebAppMethodUnsupported");if(Q)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var r="",n="",c=[],w={};if(typeof e.title<"u"){if(r=u(e.title),r.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",r),Error("WebAppPopupParamInvalid");r.length>0&&(w.title=r)}if(typeof e.message<"u"&&(n=u(e.message)),!n.length)throw console.error("[Telegram.WebApp] Popup message is required",e.message),Error("WebAppPopupParamInvalid");if(n.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",n),Error("WebAppPopupParamInvalid");if(w.message=n,typeof e.buttons<"u"){if(!Array.isArray(e.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",e.buttons),Error("WebAppPopupParamInvalid");for(var p=0;p<e.buttons.length;p++){var B=e.buttons[p],m={},v="";if(typeof B.id<"u"&&(v=B.id.toString(),v.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",v),Error("WebAppPopupParamInvalid");m.id=v;var E=B.type;if(typeof E>"u"&&(E="default"),m.type=E,!(E=="ok"||E=="close"||E=="cancel"))if(E=="default"||E=="destructive"){var j="";if(typeof B.text<"u"&&(j=u(B.text)),!j.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+E,B.text),Error("WebAppPopupParamInvalid");if(j.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",j),Error("WebAppPopupParamInvalid");m.text=j}else throw console.error("[Telegram.WebApp] Popup button type is invalid",E),Error("WebAppPopupParamInvalid");c.push(m)}}else c.push({id:"",type:"close"});if(c.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(c.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");w.buttons=c,Q={callback:t},l.postEvent("web_app_open_popup",!1,w)},a.showAlert=function(e,t){a.showPopup({message:e},t?function(){t()}:null)},a.showConfirm=function(e,t){a.showPopup({message:e,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},t?function(r){t(r=="ok")}:null)},a.showScanQrPopup=function(e,t){if(!P("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+d),Error("WebAppMethodUnsupported");if(U)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var r="",n={};if(typeof e.text<"u"){if(r=u(e.text),r.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",r),Error("WebAppScanQrPopupParamInvalid");r.length>0&&(n.text=r)}U={callback:t},l.postEvent("web_app_open_scan_qr_popup",!1,n)},a.closeScanQrPopup=function(){if(!P("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+d),Error("WebAppMethodUnsupported");U=!1,l.postEvent("web_app_close_scan_qr_popup",!1)},a.readTextFromClipboard=function(e){if(!P("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+d),Error("WebAppMethodUnsupported");var t=pe(16),r={req_id:t};z[t]={callback:e},l.postEvent("web_app_read_text_from_clipboard",!1,r)},a.ready=function(){l.postEvent("web_app_ready")},a.expand=function(){l.postEvent("web_app_expand")},a.close=function(){l.postEvent("web_app_close")},window.Telegram.WebApp=a,Z(),K(),window.addEventListener("resize",o),A&&document.addEventListener("click",s),l.onEvent("theme_changed",I),l.onEvent("viewport_changed",J),l.onEvent("invoice_closed",ye),l.onEvent("popup_closed",Ee),l.onEvent("qr_text_received",Ae),l.onEvent("scan_qr_popup_closed",Pe),l.onEvent("clipboard_text_received",We),l.postEvent("web_app_request_theme"),l.postEvent("web_app_request_viewport")})();
