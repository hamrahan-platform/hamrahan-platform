localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");window.dataLayer=window.dataLayer||[];function se(){dataLayer.push(arguments)}se("js",new Date);se("config","G-E467EPR2TW");(function(){var A={},p="";try{p=location.hash.toString()}catch{}var g=D(p),M=J("initParams");if(M)for(var a in M)typeof g[a]>"u"&&(g[a]=M[a]);L("initParams",g);var k=!1,T;try{if(k=window.parent!=null&&window!=window.parent,k){window.addEventListener("message",function(o){if(o.source===window.parent){try{var s=JSON.parse(o.data)}catch{return}!s||!s.eventType||(s.eventType=="set_custom_style"?T.innerHTML=s.eventData:W(s.eventType,s.eventData))}}),T=document.createElement("style"),document.head.appendChild(T);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready"}),"*")}catch{}}}catch{}function m(o){try{return o=o.replace(/\+/g,"%20"),decodeURIComponent(o)}catch{return o}}function D(o){o=o.replace(/^#/,"");var s={};if(!o.length)return s;if(o.indexOf("=")<0&&o.indexOf("?")<0)return s._path=m(o),s;var u=o.indexOf("?");if(u>=0){var c=o.substr(0,u);s._path=m(c),o=o.substr(u+1)}var y=h(o);for(var C in y)s[C]=y[C];return s}function h(o){var s={};if(!o.length)return s;var u=o.split("&"),c,y,C,O;for(c=0;c<u.length;c++)y=u[c].split("="),C=m(y[0]),O=y[1]==null?null:m(y[1]),s[C]=O;return s}function N(o,s){var u=o.indexOf("#");if(u<0)return o+"#"+s;var c=o.substr(u+1);return c.indexOf("=")>=0||c.indexOf("?")>=0?o+"&"+s:c.length>0?o+"?"+s:o+s}function U(o,s,u){if(s||(s=function(){}),u===void 0&&(u=""),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(o,JSON.stringify(u)),s();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:o,eventData:u})),s();else if(k)try{var c="https://web.telegram.org";c="*",window.parent.postMessage(JSON.stringify({eventType:o,eventData:u}),c),g.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent via postMessage",o,u),s()}catch(y){s(y)}else g.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent",o,u),s({notAvailable:!0})}function W(o,s){Q(o,function(u){u(o,s)})}function Q(o,s){var u=A[o];if(!(u===void 0||!u.length))for(var c=0;c<u.length;c++)try{s(u[c])}catch{}}function S(o,s){A[o]===void 0&&(A[o]=[]);var u=A[o].indexOf(s);u===-1&&A[o].push(s)}function $(o,s){if(A[o]!==void 0){var u=A[o].indexOf(s);u!==-1&&A[o].splice(u,1)}}function L(o,s){try{return window.sessionStorage.setItem("__telegram__"+o,JSON.stringify(s)),!0}catch{}return!1}function J(o){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+o))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:g,isIframe:k,onEvent:S,offEvent:$,postEvent:U,receiveEvent:W,callEventCallbacks:Q},window.Telegram.Utils={urlSafeDecode:m,urlParseQueryString:h,urlParseHashParams:D,urlAppendHashParams:N,sessionStorageSet:L,sessionStorageGet:J},window.TelegramGameProxy_receiveEvent=W,window.TelegramGameProxy={receiveEvent:W}})();(function(){var A=window.Telegram.Utils,p=window.Telegram.WebView,g=p.initParams,M=p.isIframe,a={},k="",T={},m={},D="light",h="6.0",N="unknown";if(g.tgWebAppData&&g.tgWebAppData.length){k=g.tgWebAppData,T=A.urlParseQueryString(k);for(var U in T){var W=T[U];try{(W.substr(0,1)=="{"&&W.substr(-1)=="}"||W.substr(0,1)=="["&&W.substr(-1)=="]")&&(T[U]=JSON.parse(W))}catch{}}}if(g.tgWebAppThemeParams&&g.tgWebAppThemeParams.length){var Q=g.tgWebAppThemeParams;try{var S=JSON.parse(Q);S&&G(S)}catch{}}var S=A.sessionStorageGet("themeParams");S&&G(S),g.tgWebAppVersion&&(h=g.tgWebAppVersion),g.tgWebAppPlatform&&(N=g.tgWebAppPlatform);function $(e,r){r.theme_params&&(G(r.theme_params),window.Telegram.WebApp.MainButton.setParams({}),Z(),c("themeChanged"))}var L=window.innerHeight;function J(e,r){r.height&&(window.removeEventListener("resize",o),K(r))}function o(e){L!=window.innerHeight&&(L=window.innerHeight,c("viewportChanged",{isStateStable:!0}))}function s(e){if(!(e.metaKey||e.ctrlKey)){for(var r=e.target;r.tagName!="A"&&r.parentNode;)r=r.parentNode;r.tagName=="A"&&r.target!="_blank"&&(r.protocol=="http:"||r.protocol=="https:")&&r.hostname=="t.me"&&(a.openTgLink(r.href),e.preventDefault())}}function u(e){return e.toString().replace(/^\s+|\s+$/g,"")}function c(e){var r=Array.prototype.slice.call(arguments);e=r.shift(),p.callEventCallbacks("webview:"+e,function(t){t.apply(a,r)})}function y(e,r){p.onEvent("webview:"+e,r)}function C(e,r){p.offEvent("webview:"+e,r)}function O(e,r){var t=document.documentElement;t&&t.style&&t.style.setProperty&&t.style.setProperty("--tg-"+e,r)}function G(e){e.bg_color=="#1c1c1d"&&e.bg_color==e.secondary_bg_color&&(e.secondary_bg_color="#2c2c2e");var r;for(var t in e)(r=q(e[t]))&&(m[t]=r,t=="bg_color"&&(D=de(r)?"dark":"light",O("color-scheme",D)),t="theme-"+t.split("_").join("-"),O(t,r));A.sessionStorageSet("themeParams",m)}function le(e){for(var r="",t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=t.length,f=0;f<e;f++)r+=t[Math.floor(Math.random()*n)];return r}var H=!1,j=!1,ee=!0;function K(e){typeof e<"u"&&(ee=!!e.is_expanded,H=e.height,e.is_state_stable&&(j=e.height),c("viewportChanged",{isStateStable:!!e.is_state_stable}));var r,t;H!==!1?r=H-P+"px":r=P?"calc(100vh - "+P+"px)":"100vh",j!==!1?t=j-P+"px":t=P?"calc(100vh - "+P+"px)":"100vh",O("viewport-height",r),O("viewport-stable-height",t)}var X=!1;function pe(e){if(!_("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+h);return}X=!!e,p.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:X})}var re="bg_color";function ue(){return m[re]||null}function fe(e){if(!_("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+h);return}var r;if(e=="bg_color"||e=="secondary_bg_color"?r=e:(r=q(e),m.bg_color&&m.bg_color==r?r="bg_color":m.secondary_bg_color&&m.secondary_bg_color==r?r="secondary_bg_color":r=!1),r!="bg_color"&&r!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",e),Error("WebAppHeaderColorKeyInvalid");re=r,p.postEvent("web_app_set_header_color",!1,{color_key:r})}var R="bg_color";function te(){return R=="secondary_bg_color"?m.secondary_bg_color:R=="bg_color"?m.bg_color:R}function ce(e){if(!_("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+h);return}var r;if(e=="bg_color"||e=="secondary_bg_color")r=e;else if(r=q(e),!r)throw console.error("[Telegram.WebApp] Background color format is invalid",e),Error("WebAppBackgroundColorInvalid");R=r,Z()}var ne=null;function Z(){var e=te();ne!=e&&(ne=e,p.postEvent("web_app_set_background_color",!1,{color:e}))}function q(e){e+="";var r;if(r=/^\s*#([0-9a-f]{6})\s*$/i.exec(e))return"#"+r[1].toLowerCase();if(r=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(e))return("#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]).toLowerCase();if(r=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(e)){var t=parseInt(r[1]),n=parseInt(r[2]),f=parseInt(r[3]);return t=(t<16?"0":"")+t.toString(16),n=(n<16?"0":"")+n.toString(16),f=(f<16?"0":"")+f.toString(16),"#"+t+n+f}return!1}function de(e){e=e.replace(/[\s#]/g,""),e.length==3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var r=parseInt(e.substr(0,2),16),t=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16),f=Math.sqrt(.299*(r*r)+.587*(t*t)+.114*(n*n));return f<120}function be(e,r){typeof e!="string"&&(e=""),typeof r!="string"&&(r=""),e=e.replace(/^\s+|\s+$/g,"").split("."),r=r.replace(/^\s+|\s+$/g,"").split(".");var t=Math.max(e.length,r.length),n,f,v;for(n=0;n<t;n++)if(f=parseInt(e[n])||0,v=parseInt(r[n])||0,f!=v)return f>v?1:-1;return 0}function _(e){return be(h,e)>=0}function ge(e){if(window.Blob)try{return new Blob([e]).size}catch{}for(var r=e.length,t=e.length-1;t>=0;t--){var n=e.charCodeAt(t);n>127&&n<=2047?r++:n>2047&&n<=65535&&(r+=2),n>=56320&&n<=57343&&t--}return r}var ve=function(){var e=!1,r={};Object.defineProperty(r,"isVisible",{set:function(d){b({is_visible:d})},get:function(){return e},enumerable:!0});var t=null;p.onEvent("back_button_pressed",n);function n(){c("backButtonClicked")}function f(){return{is_visible:e}}function v(d){return typeof d>"u"&&(d=f()),JSON.stringify(d)}function l(){return _("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+h),!1)}function E(){var d=f(),w=v(d);t!==w&&(t=w,p.postEvent("web_app_setup_back_button",!1,d))}function b(d){return l()&&(typeof d.is_visible<"u"&&(e=!!d.is_visible),E()),r}return r.onClick=function(d){return l()&&y("backButtonClicked",d),r},r.offClick=function(d){return l()&&C("backButtonClicked",d),r},r.show=function(){return b({is_visible:!0})},r.hide=function(){return b({is_visible:!1})},r}(),P=0,me=function(){var e=!1,r=!0,t=!1,n="CONTINUE",f=!1,v=!1,l={};Object.defineProperty(l,"text",{set:function(i){l.setParams({text:i})},get:function(){return n},enumerable:!0}),Object.defineProperty(l,"color",{set:function(i){l.setParams({color:i})},get:function(){return f||m.button_color||"#2481cc"},enumerable:!0}),Object.defineProperty(l,"textColor",{set:function(i){l.setParams({text_color:i})},get:function(){return v||m.button_text_color||"#ffffff"},enumerable:!0}),Object.defineProperty(l,"isVisible",{set:function(i){l.setParams({is_visible:i})},get:function(){return e},enumerable:!0}),Object.defineProperty(l,"isProgressVisible",{get:function(){return t},enumerable:!0}),Object.defineProperty(l,"isActive",{set:function(i){l.setParams({is_active:i})},get:function(){return r},enumerable:!0});var E=null;p.onEvent("main_button_pressed",I);var b=null,d={};if(g.tgWebAppDebug){b=document.createElement("tg-main-button"),d={font:"600 14px/18px sans-serif",display:"none",width:"100%",height:"48px",borderRadius:"0",background:"no-repeat right center",position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"15px 20px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var w in d)b.style[w]=d[w];document.addEventListener("DOMContentLoaded",function i(x){document.removeEventListener("DOMContentLoaded",i),document.body.appendChild(b),b.addEventListener("click",I,!1)})}function I(){r&&c("mainButtonClicked")}function oe(){var i=l.color,x=l.textColor;return e?{is_visible:!0,is_active:r,is_progress_visible:t,text:n,color:i,text_color:x}:{is_visible:!1}}function We(i){return typeof i>"u"&&(i=oe()),JSON.stringify(i)}function Y(){var i=oe(),x=We(i);E!==x&&(E=x,p.postEvent("web_app_setup_main_button",!1,i),g.tgWebAppDebug&&xe(i))}function xe(i){i.is_visible?(b.style.display="block",P=48,b.style.opacity=i.is_active?"1":"0.8",b.style.cursor=i.is_active?"pointer":"auto",b.disabled=!i.is_active,b.innerText=i.text,b.style.backgroundImage=i.is_progress_visible?"url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewport%3D%220%200%2048%2048%22%20width%3D%2248px%22%20height%3D%2248px%22%3E%3Ccircle%20cx%3D%2250%25%22%20cy%3D%2250%25%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222.25%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%20stroke-dashoffset%3D%22106%22%20r%3D%229%22%20stroke-dasharray%3D%2256.52%22%20rotate%3D%22-90%22%3E%3Canimate%20attributeName%3D%22stroke-dashoffset%22%20attributeType%3D%22XML%22%20dur%3D%22360s%22%20from%3D%220%22%20to%3D%2212500%22%20repeatCount%3D%22indefinite%22%3E%3C%2Fanimate%3E%3CanimateTransform%20attributeName%3D%22transform%22%20attributeType%3D%22XML%22%20type%3D%22rotate%22%20dur%3D%221s%22%20from%3D%22-90%2024%2024%22%20to%3D%22630%2024%2024%22%20repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fcircle%3E%3C%2Fsvg%3E')":"none",b.style.backgroundColor=i.color,b.style.color=i.text_color):(b.style.display="none",P=0),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=P+"px"),K()}function Te(i){if(typeof i.text<"u"){var x=u(i.text);if(!x.length)throw console.error("[Telegram.WebApp] Main button text is required",i.text),Error("WebAppMainButtonParamInvalid");if(x.length>64)throw console.error("[Telegram.WebApp] Main button text is too long",x),Error("WebAppMainButtonParamInvalid");n=x}if(typeof i.color<"u")if(i.color===!1||i.color===null)f=!1;else{var ie=q(i.color);if(!ie)throw console.error("[Telegram.WebApp] Main button color format is invalid",i.color),Error("WebAppMainButtonParamInvalid");f=ie}if(typeof i.text_color<"u")if(i.text_color===!1||i.text_color===null)v=!1;else{var ae=q(i.text_color);if(!ae)throw console.error("[Telegram.WebApp] Main button text color format is invalid",i.text_color),Error("WebAppMainButtonParamInvalid");v=ae}if(typeof i.is_visible<"u"){if(i.is_visible&&!l.text.length)throw console.error("[Telegram.WebApp] Main button text is required"),Error("WebAppMainButtonParamInvalid");e=!!i.is_visible}return typeof i.is_active<"u"&&(r=!!i.is_active),Y(),l}return l.setText=function(i){return l.setParams({text:i})},l.onClick=function(i){return y("mainButtonClicked",i),l},l.offClick=function(i){return C("mainButtonClicked",i),l},l.show=function(){return l.setParams({is_visible:!0})},l.hide=function(){return l.setParams({is_visible:!1})},l.enable=function(){return l.setParams({is_active:!0})},l.disable=function(){return l.setParams({is_active:!1})},l.showProgress=function(i){return r=!!i,t=!0,Y(),l},l.hideProgress=function(){return l.isActive||(r=!0),t=!1,Y(),l},l.setParams=Te,l}();function he(){c("settingsButtonClicked")}p.onEvent("settings_button_pressed",he);var we=function(){var e={};function r(t){if(!_("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+h),e;if(t.type=="impact"){if(t.impact_style!="light"&&t.impact_style!="medium"&&t.impact_style!="heavy"&&t.impact_style!="rigid"&&t.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",t.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(t.type=="notification"){if(t.notification_type!="error"&&t.notification_type!="success"&&t.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",t.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(t.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",t.type),Error("WebAppHapticFeedbackTypeInvalid");return p.postEvent("web_app_trigger_haptic_feedback",!1,t),e}return e.impactOccurred=function(t){return r({type:"impact",impact_style:t})},e.notificationOccurred=function(t){return r({type:"notification",notification_type:t})},e.selectionChanged=function(){return r({type:"selection_change"})},e}(),V={};function _e(e,r){if(r.slug&&V[r.slug]){var t=V[r.slug];delete V[r.slug],t.callback&&t.callback(r.status),c("invoiceClosed",{url:t.url,status:r.status})}}var F=!1;function ye(e,r){if(F){var t=F;F=!1;var n=null;typeof r.button_id<"u"&&(n=r.button_id),t.callback&&t.callback(n),c("popupClosed",{button_id:n})}}var B=!1;function Ae(e,r){if(B){var t=B,n=null;typeof r.data<"u"&&(n=r.data),t.callback&&t.callback(n)&&(B=!1,p.postEvent("web_app_close_scan_qr_popup",!1)),c("qrTextReceived",{data:n})}}function Pe(e,r){B=!1}var z={};function Ee(e,r){if(r.req_id&&z[r.req_id]){var t=z[r.req_id];delete z[r.req_id];var n=null;typeof r.data<"u"&&(n=r.data),t.callback&&t.callback(n),c("clipboardTextReceived",{data:n})}}window.Telegram||(window.Telegram={}),Object.defineProperty(a,"initData",{get:function(){return k},enumerable:!0}),Object.defineProperty(a,"initDataUnsafe",{get:function(){return T},enumerable:!0}),Object.defineProperty(a,"version",{get:function(){return h},enumerable:!0}),Object.defineProperty(a,"platform",{get:function(){return N},enumerable:!0}),Object.defineProperty(a,"colorScheme",{get:function(){return D},enumerable:!0}),Object.defineProperty(a,"themeParams",{get:function(){return m},enumerable:!0}),Object.defineProperty(a,"isExpanded",{get:function(){return ee},enumerable:!0}),Object.defineProperty(a,"viewportHeight",{get:function(){return(H===!1?window.innerHeight:H)-P},enumerable:!0}),Object.defineProperty(a,"viewportStableHeight",{get:function(){return(j===!1?window.innerHeight:j)-P},enumerable:!0}),Object.defineProperty(a,"isClosingConfirmationEnabled",{set:function(e){pe(e)},get:function(){return X},enumerable:!0}),Object.defineProperty(a,"headerColor",{set:function(e){fe(e)},get:function(){return ue()},enumerable:!0}),Object.defineProperty(a,"backgroundColor",{set:function(e){ce(e)},get:function(){return te()},enumerable:!0}),Object.defineProperty(a,"BackButton",{value:ve,enumerable:!0}),Object.defineProperty(a,"MainButton",{value:me,enumerable:!0}),Object.defineProperty(a,"HapticFeedback",{value:we,enumerable:!0}),a.setHeaderColor=function(e){a.headerColor=e},a.setBackgroundColor=function(e){a.backgroundColor=e},a.enableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!0},a.disableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!1},a.isVersionAtLeast=function(e){return _(e)},a.onEvent=function(e,r){y(e,r)},a.offEvent=function(e,r){C(e,r)},a.sendData=function(e){if(!e||!e.length)throw console.error("[Telegram.WebApp] Data is required",e),Error("WebAppDataInvalid");if(ge(e)>4096)throw console.error("[Telegram.WebApp] Data is too long",e),Error("WebAppDataInvalid");p.postEvent("web_app_data_send",!1,{data:e})},a.switchInlineQuery=function(e,r){if(!_("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+h),Error("WebAppMethodUnsupported");if(!g.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(e=e||"",e.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",e),Error("WebAppInlineQueryInvalid");var t=[];if(r){if(!Array.isArray(r))throw console.error("[Telegram.WebApp] Choose chat types should be an array",r),Error("WebAppInlineChooseChatTypesInvalid");for(var n={users:1,bots:1,groups:1,channels:1},f=0;f<r.length;f++){var v=r[f];if(!n[v])throw console.error("[Telegram.WebApp] Choose chat type is invalid",v),Error("WebAppInlineChooseChatTypeInvalid");n[v]!=2&&(n[v]=2,t.push(v))}}p.postEvent("web_app_switch_inline_query",!1,{query:e,chat_types:t})},a.openLink=function(n,r){var t=document.createElement("A");if(t.href=n,t.protocol!="http:"&&t.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",n),Error("WebAppTgUrlInvalid");var n=t.href;r=r||{},_("6.1")?p.postEvent("web_app_open_link",!1,{url:n,try_instant_view:_("6.4")&&!!r.try_instant_view}):window.open(n,"_blank")},a.openTelegramLink=function(e){var r=document.createElement("A");if(r.href=e,r.protocol!="http:"&&r.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",e),Error("WebAppTgUrlInvalid");if(r.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",e),Error("WebAppTgUrlInvalid");var t=r.pathname+r.search;M||_("6.1")?p.postEvent("web_app_open_tg_link",!1,{path_full:t}):location.href="https://t.me"+t},a.openInvoice=function(e,r){var t=document.createElement("A"),n,f;if(t.href=e,t.protocol!="http:"&&t.protocol!="https:"||t.hostname!="t.me"||!(n=t.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(f=n[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",e),Error("WebAppInvoiceUrlInvalid");if(!_("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+h),Error("WebAppMethodUnsupported");if(V[f])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");V[f]={url:e,callback:r},p.postEvent("web_app_open_invoice",!1,{slug:f})},a.showPopup=function(e,r){if(!_("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+h),Error("WebAppMethodUnsupported");if(F)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var t="",n="",f=[],v={};if(typeof e.title<"u"){if(t=u(e.title),t.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",t),Error("WebAppPopupParamInvalid");t.length>0&&(v.title=t)}if(typeof e.message<"u"&&(n=u(e.message)),!n.length)throw console.error("[Telegram.WebApp] Popup message is required",e.message),Error("WebAppPopupParamInvalid");if(n.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",n),Error("WebAppPopupParamInvalid");if(v.message=n,typeof e.buttons<"u"){if(!Array.isArray(e.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",e.buttons),Error("WebAppPopupParamInvalid");for(var l=0;l<e.buttons.length;l++){var E=e.buttons[l],b={},d="";if(typeof E.id<"u"&&(d=E.id.toString(),d.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",d),Error("WebAppPopupParamInvalid");b.id=d;var w=E.type;if(typeof w>"u"&&(w="default"),b.type=w,!(w=="ok"||w=="close"||w=="cancel"))if(w=="default"||w=="destructive"){var I="";if(typeof E.text<"u"&&(I=u(E.text)),!I.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+w,E.text),Error("WebAppPopupParamInvalid");if(I.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",I),Error("WebAppPopupParamInvalid");b.text=I}else throw console.error("[Telegram.WebApp] Popup button type is invalid",w),Error("WebAppPopupParamInvalid");f.push(b)}}else f.push({id:"",type:"close"});if(f.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(f.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");v.buttons=f,F={callback:r},p.postEvent("web_app_open_popup",!1,v)},a.showAlert=function(e,r){a.showPopup({message:e},r?function(){r()}:null)},a.showConfirm=function(e,r){a.showPopup({message:e,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},r?function(t){r(t=="ok")}:null)},a.showScanQrPopup=function(e,r){if(!_("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+h),Error("WebAppMethodUnsupported");if(B)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var t="",n={};if(typeof e.text<"u"){if(t=u(e.text),t.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",t),Error("WebAppScanQrPopupParamInvalid");t.length>0&&(n.text=t)}B={callback:r},p.postEvent("web_app_open_scan_qr_popup",!1,n)},a.closeScanQrPopup=function(){if(!_("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+h),Error("WebAppMethodUnsupported");B=!1,p.postEvent("web_app_close_scan_qr_popup",!1)},a.readTextFromClipboard=function(e){if(!_("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+h),Error("WebAppMethodUnsupported");var r=le(16),t={req_id:r};z[r]={callback:e},p.postEvent("web_app_read_text_from_clipboard",!1,t)},a.ready=function(){p.postEvent("web_app_ready")},a.expand=function(){p.postEvent("web_app_expand")},a.close=function(){p.postEvent("web_app_close")},window.Telegram.WebApp=a,Z(),K(),window.addEventListener("resize",o),M&&document.addEventListener("click",s),p.onEvent("theme_changed",$),p.onEvent("viewport_changed",J),p.onEvent("invoice_closed",_e),p.onEvent("popup_closed",ye),p.onEvent("qr_text_received",Ae),p.onEvent("scan_qr_popup_closed",Pe),p.onEvent("clipboard_text_received",Ee),p.postEvent("web_app_request_theme"),p.postEvent("web_app_request_viewport")})();
