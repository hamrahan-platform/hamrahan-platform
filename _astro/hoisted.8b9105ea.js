var ee=null;document.getElementById("menu-btn")?.addEventListener("click",function(A){ee==null&&(ee=document.getElementById("menu")),ee?.classList.toggle("hidden")});localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");window.dataLayer=window.dataLayer||[];function le(){dataLayer.push(arguments)}le("js",new Date);le("config","G-E467EPR2TW");(function(){var A={},p="";try{p=location.hash.toString()}catch{}var g=D(p),M=J("initParams");if(M)for(var a in M)typeof g[a]>"u"&&(g[a]=M[a]);L("initParams",g);var k=!1,T;try{if(k=window.parent!=null&&window!=window.parent,k){window.addEventListener("message",function(o){if(o.source===window.parent){try{var s=JSON.parse(o.data)}catch{return}!s||!s.eventType||(s.eventType=="set_custom_style"?T.innerHTML=s.eventData:W(s.eventType,s.eventData))}}),T=document.createElement("style"),document.head.appendChild(T);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready"}),"*")}catch{}}}catch{}function m(o){try{return o=o.replace(/\+/g,"%20"),decodeURIComponent(o)}catch{return o}}function D(o){o=o.replace(/^#/,"");var s={};if(!o.length)return s;if(o.indexOf("=")<0&&o.indexOf("?")<0)return s._path=m(o),s;var u=o.indexOf("?");if(u>=0){var f=o.substr(0,u);s._path=m(f),o=o.substr(u+1)}var y=h(o);for(var C in y)s[C]=y[C];return s}function h(o){var s={};if(!o.length)return s;var u=o.split("&"),f,y,C,O;for(f=0;f<u.length;f++)y=u[f].split("="),C=m(y[0]),O=y[1]==null?null:m(y[1]),s[C]=O;return s}function N(o,s){var u=o.indexOf("#");if(u<0)return o+"#"+s;var f=o.substr(u+1);return f.indexOf("=")>=0||f.indexOf("?")>=0?o+"&"+s:f.length>0?o+"?"+s:o+s}function U(o,s,u){if(s||(s=function(){}),u===void 0&&(u=""),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(o,JSON.stringify(u)),s();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:o,eventData:u})),s();else if(k)try{var f="https://web.telegram.org";f="*",window.parent.postMessage(JSON.stringify({eventType:o,eventData:u}),f),g.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent via postMessage",o,u),s()}catch(y){s(y)}else g.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent",o,u),s({notAvailable:!0})}function W(o,s){Q(o,function(u){u(o,s)})}function Q(o,s){var u=A[o];if(!(u===void 0||!u.length))for(var f=0;f<u.length;f++)try{s(u[f])}catch{}}function S(o,s){A[o]===void 0&&(A[o]=[]);var u=A[o].indexOf(s);u===-1&&A[o].push(s)}function $(o,s){if(A[o]!==void 0){var u=A[o].indexOf(s);u!==-1&&A[o].splice(u,1)}}function L(o,s){try{return window.sessionStorage.setItem("__telegram__"+o,JSON.stringify(s)),!0}catch{}return!1}function J(o){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+o))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:g,isIframe:k,onEvent:S,offEvent:$,postEvent:U,receiveEvent:W,callEventCallbacks:Q},window.Telegram.Utils={urlSafeDecode:m,urlParseQueryString:h,urlParseHashParams:D,urlAppendHashParams:N,sessionStorageSet:L,sessionStorageGet:J},window.TelegramGameProxy_receiveEvent=W,window.TelegramGameProxy={receiveEvent:W}})();(function(){var A=window.Telegram.Utils,p=window.Telegram.WebView,g=p.initParams,M=p.isIframe,a={},k="",T={},m={},D="light",h="6.0",N="unknown";if(g.tgWebAppData&&g.tgWebAppData.length){k=g.tgWebAppData,T=A.urlParseQueryString(k);for(var U in T){var W=T[U];try{(W.substr(0,1)=="{"&&W.substr(-1)=="}"||W.substr(0,1)=="["&&W.substr(-1)=="]")&&(T[U]=JSON.parse(W))}catch{}}}if(g.tgWebAppThemeParams&&g.tgWebAppThemeParams.length){var Q=g.tgWebAppThemeParams;try{var S=JSON.parse(Q);S&&G(S)}catch{}}var S=A.sessionStorageGet("themeParams");S&&G(S),g.tgWebAppVersion&&(h=g.tgWebAppVersion),g.tgWebAppPlatform&&(N=g.tgWebAppPlatform);function $(e,t){t.theme_params&&(G(t.theme_params),window.Telegram.WebApp.MainButton.setParams({}),Z(),f("themeChanged"))}var L=window.innerHeight;function J(e,t){t.height&&(window.removeEventListener("resize",o),K(t))}function o(e){L!=window.innerHeight&&(L=window.innerHeight,f("viewportChanged",{isStateStable:!0}))}function s(e){if(!(e.metaKey||e.ctrlKey)){for(var t=e.target;t.tagName!="A"&&t.parentNode;)t=t.parentNode;t.tagName=="A"&&t.target!="_blank"&&(t.protocol=="http:"||t.protocol=="https:")&&t.hostname=="t.me"&&(a.openTgLink(t.href),e.preventDefault())}}function u(e){return e.toString().replace(/^\s+|\s+$/g,"")}function f(e){var t=Array.prototype.slice.call(arguments);e=t.shift(),p.callEventCallbacks("webview:"+e,function(r){r.apply(a,t)})}function y(e,t){p.onEvent("webview:"+e,t)}function C(e,t){p.offEvent("webview:"+e,t)}function O(e,t){var r=document.documentElement;r&&r.style&&r.style.setProperty&&r.style.setProperty("--tg-"+e,t)}function G(e){e.bg_color=="#1c1c1d"&&e.bg_color==e.secondary_bg_color&&(e.secondary_bg_color="#2c2c2e");var t;for(var r in e)(t=q(e[r]))&&(m[r]=t,r=="bg_color"&&(D=be(t)?"dark":"light",O("color-scheme",D)),r="theme-"+r.split("_").join("-"),O(r,t));A.sessionStorageSet("themeParams",m)}function pe(e){for(var t="",r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=r.length,c=0;c<e;c++)t+=r[Math.floor(Math.random()*n)];return t}var H=!1,j=!1,te=!0;function K(e){typeof e<"u"&&(te=!!e.is_expanded,H=e.height,e.is_state_stable&&(j=e.height),f("viewportChanged",{isStateStable:!!e.is_state_stable}));var t,r;H!==!1?t=H-E+"px":t=E?"calc(100vh - "+E+"px)":"100vh",j!==!1?r=j-E+"px":r=E?"calc(100vh - "+E+"px)":"100vh",O("viewport-height",t),O("viewport-stable-height",r)}var X=!1;function ue(e){if(!_("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+h);return}X=!!e,p.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:X})}var re="bg_color";function ce(){return m[re]||null}function fe(e){if(!_("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+h);return}var t;if(e=="bg_color"||e=="secondary_bg_color"?t=e:(t=q(e),m.bg_color&&m.bg_color==t?t="bg_color":m.secondary_bg_color&&m.secondary_bg_color==t?t="secondary_bg_color":t=!1),t!="bg_color"&&t!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",e),Error("WebAppHeaderColorKeyInvalid");re=t,p.postEvent("web_app_set_header_color",!1,{color_key:t})}var R="bg_color";function ne(){return R=="secondary_bg_color"?m.secondary_bg_color:R=="bg_color"?m.bg_color:R}function de(e){if(!_("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+h);return}var t;if(e=="bg_color"||e=="secondary_bg_color")t=e;else if(t=q(e),!t)throw console.error("[Telegram.WebApp] Background color format is invalid",e),Error("WebAppBackgroundColorInvalid");R=t,Z()}var oe=null;function Z(){var e=ne();oe!=e&&(oe=e,p.postEvent("web_app_set_background_color",!1,{color:e}))}function q(e){e+="";var t;if(t=/^\s*#([0-9a-f]{6})\s*$/i.exec(e))return"#"+t[1].toLowerCase();if(t=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(e))return("#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]).toLowerCase();if(t=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(e)){var r=parseInt(t[1]),n=parseInt(t[2]),c=parseInt(t[3]);return r=(r<16?"0":"")+r.toString(16),n=(n<16?"0":"")+n.toString(16),c=(c<16?"0":"")+c.toString(16),"#"+r+n+c}return!1}function be(e){e=e.replace(/[\s#]/g,""),e.length==3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16),c=Math.sqrt(.299*(t*t)+.587*(r*r)+.114*(n*n));return c<120}function ge(e,t){typeof e!="string"&&(e=""),typeof t!="string"&&(t=""),e=e.replace(/^\s+|\s+$/g,"").split("."),t=t.replace(/^\s+|\s+$/g,"").split(".");var r=Math.max(e.length,t.length),n,c,v;for(n=0;n<r;n++)if(c=parseInt(e[n])||0,v=parseInt(t[n])||0,c!=v)return c>v?1:-1;return 0}function _(e){return ge(h,e)>=0}function ve(e){if(window.Blob)try{return new Blob([e]).size}catch{}for(var t=e.length,r=e.length-1;r>=0;r--){var n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}var me=function(){var e=!1,t={};Object.defineProperty(t,"isVisible",{set:function(d){b({is_visible:d})},get:function(){return e},enumerable:!0});var r=null;p.onEvent("back_button_pressed",n);function n(){f("backButtonClicked")}function c(){return{is_visible:e}}function v(d){return typeof d>"u"&&(d=c()),JSON.stringify(d)}function l(){return _("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+h),!1)}function P(){var d=c(),w=v(d);r!==w&&(r=w,p.postEvent("web_app_setup_back_button",!1,d))}function b(d){return l()&&(typeof d.is_visible<"u"&&(e=!!d.is_visible),P()),t}return t.onClick=function(d){return l()&&y("backButtonClicked",d),t},t.offClick=function(d){return l()&&C("backButtonClicked",d),t},t.show=function(){return b({is_visible:!0})},t.hide=function(){return b({is_visible:!1})},t}(),E=0,he=function(){var e=!1,t=!0,r=!1,n="CONTINUE",c=!1,v=!1,l={};Object.defineProperty(l,"text",{set:function(i){l.setParams({text:i})},get:function(){return n},enumerable:!0}),Object.defineProperty(l,"color",{set:function(i){l.setParams({color:i})},get:function(){return c||m.button_color||"#2481cc"},enumerable:!0}),Object.defineProperty(l,"textColor",{set:function(i){l.setParams({text_color:i})},get:function(){return v||m.button_text_color||"#ffffff"},enumerable:!0}),Object.defineProperty(l,"isVisible",{set:function(i){l.setParams({is_visible:i})},get:function(){return e},enumerable:!0}),Object.defineProperty(l,"isProgressVisible",{get:function(){return r},enumerable:!0}),Object.defineProperty(l,"isActive",{set:function(i){l.setParams({is_active:i})},get:function(){return t},enumerable:!0});var P=null;p.onEvent("main_button_pressed",I);var b=null,d={};if(g.tgWebAppDebug){b=document.createElement("tg-main-button"),d={font:"600 14px/18px sans-serif",display:"none",width:"100%",height:"48px",borderRadius:"0",background:"no-repeat right center",position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"15px 20px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var w in d)b.style[w]=d[w];document.addEventListener("DOMContentLoaded",function i(x){document.removeEventListener("DOMContentLoaded",i),document.body.appendChild(b),b.addEventListener("click",I,!1)})}function I(){t&&f("mainButtonClicked")}function ie(){var i=l.color,x=l.textColor;return e?{is_visible:!0,is_active:t,is_progress_visible:r,text:n,color:i,text_color:x}:{is_visible:!1}}function xe(i){return typeof i>"u"&&(i=ie()),JSON.stringify(i)}function Y(){var i=ie(),x=xe(i);P!==x&&(P=x,p.postEvent("web_app_setup_main_button",!1,i),g.tgWebAppDebug&&Te(i))}function Te(i){i.is_visible?(b.style.display="block",E=48,b.style.opacity=i.is_active?"1":"0.8",b.style.cursor=i.is_active?"pointer":"auto",b.disabled=!i.is_active,b.innerText=i.text,b.style.backgroundImage=i.is_progress_visible?"url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewport%3D%220%200%2048%2048%22%20width%3D%2248px%22%20height%3D%2248px%22%3E%3Ccircle%20cx%3D%2250%25%22%20cy%3D%2250%25%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222.25%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%20stroke-dashoffset%3D%22106%22%20r%3D%229%22%20stroke-dasharray%3D%2256.52%22%20rotate%3D%22-90%22%3E%3Canimate%20attributeName%3D%22stroke-dashoffset%22%20attributeType%3D%22XML%22%20dur%3D%22360s%22%20from%3D%220%22%20to%3D%2212500%22%20repeatCount%3D%22indefinite%22%3E%3C%2Fanimate%3E%3CanimateTransform%20attributeName%3D%22transform%22%20attributeType%3D%22XML%22%20type%3D%22rotate%22%20dur%3D%221s%22%20from%3D%22-90%2024%2024%22%20to%3D%22630%2024%2024%22%20repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fcircle%3E%3C%2Fsvg%3E')":"none",b.style.backgroundColor=i.color,b.style.color=i.text_color):(b.style.display="none",E=0),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=E+"px"),K()}function Ce(i){if(typeof i.text<"u"){var x=u(i.text);if(!x.length)throw console.error("[Telegram.WebApp] Main button text is required",i.text),Error("WebAppMainButtonParamInvalid");if(x.length>64)throw console.error("[Telegram.WebApp] Main button text is too long",x),Error("WebAppMainButtonParamInvalid");n=x}if(typeof i.color<"u")if(i.color===!1||i.color===null)c=!1;else{var ae=q(i.color);if(!ae)throw console.error("[Telegram.WebApp] Main button color format is invalid",i.color),Error("WebAppMainButtonParamInvalid");c=ae}if(typeof i.text_color<"u")if(i.text_color===!1||i.text_color===null)v=!1;else{var se=q(i.text_color);if(!se)throw console.error("[Telegram.WebApp] Main button text color format is invalid",i.text_color),Error("WebAppMainButtonParamInvalid");v=se}if(typeof i.is_visible<"u"){if(i.is_visible&&!l.text.length)throw console.error("[Telegram.WebApp] Main button text is required"),Error("WebAppMainButtonParamInvalid");e=!!i.is_visible}return typeof i.is_active<"u"&&(t=!!i.is_active),Y(),l}return l.setText=function(i){return l.setParams({text:i})},l.onClick=function(i){return y("mainButtonClicked",i),l},l.offClick=function(i){return C("mainButtonClicked",i),l},l.show=function(){return l.setParams({is_visible:!0})},l.hide=function(){return l.setParams({is_visible:!1})},l.enable=function(){return l.setParams({is_active:!0})},l.disable=function(){return l.setParams({is_active:!1})},l.showProgress=function(i){return t=!!i,r=!0,Y(),l},l.hideProgress=function(){return l.isActive||(t=!0),r=!1,Y(),l},l.setParams=Ce,l}();function we(){f("settingsButtonClicked")}p.onEvent("settings_button_pressed",we);var _e=function(){var e={};function t(r){if(!_("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+h),e;if(r.type=="impact"){if(r.impact_style!="light"&&r.impact_style!="medium"&&r.impact_style!="heavy"&&r.impact_style!="rigid"&&r.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",r.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(r.type=="notification"){if(r.notification_type!="error"&&r.notification_type!="success"&&r.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",r.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(r.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",r.type),Error("WebAppHapticFeedbackTypeInvalid");return p.postEvent("web_app_trigger_haptic_feedback",!1,r),e}return e.impactOccurred=function(r){return t({type:"impact",impact_style:r})},e.notificationOccurred=function(r){return t({type:"notification",notification_type:r})},e.selectionChanged=function(){return t({type:"selection_change"})},e}(),V={};function ye(e,t){if(t.slug&&V[t.slug]){var r=V[t.slug];delete V[t.slug],r.callback&&r.callback(t.status),f("invoiceClosed",{url:r.url,status:t.status})}}var F=!1;function Ae(e,t){if(F){var r=F;F=!1;var n=null;typeof t.button_id<"u"&&(n=t.button_id),r.callback&&r.callback(n),f("popupClosed",{button_id:n})}}var B=!1;function Ee(e,t){if(B){var r=B,n=null;typeof t.data<"u"&&(n=t.data),r.callback&&r.callback(n)&&(B=!1,p.postEvent("web_app_close_scan_qr_popup",!1)),f("qrTextReceived",{data:n})}}function Pe(e,t){B=!1}var z={};function We(e,t){if(t.req_id&&z[t.req_id]){var r=z[t.req_id];delete z[t.req_id];var n=null;typeof t.data<"u"&&(n=t.data),r.callback&&r.callback(n),f("clipboardTextReceived",{data:n})}}window.Telegram||(window.Telegram={}),Object.defineProperty(a,"initData",{get:function(){return k},enumerable:!0}),Object.defineProperty(a,"initDataUnsafe",{get:function(){return T},enumerable:!0}),Object.defineProperty(a,"version",{get:function(){return h},enumerable:!0}),Object.defineProperty(a,"platform",{get:function(){return N},enumerable:!0}),Object.defineProperty(a,"colorScheme",{get:function(){return D},enumerable:!0}),Object.defineProperty(a,"themeParams",{get:function(){return m},enumerable:!0}),Object.defineProperty(a,"isExpanded",{get:function(){return te},enumerable:!0}),Object.defineProperty(a,"viewportHeight",{get:function(){return(H===!1?window.innerHeight:H)-E},enumerable:!0}),Object.defineProperty(a,"viewportStableHeight",{get:function(){return(j===!1?window.innerHeight:j)-E},enumerable:!0}),Object.defineProperty(a,"isClosingConfirmationEnabled",{set:function(e){ue(e)},get:function(){return X},enumerable:!0}),Object.defineProperty(a,"headerColor",{set:function(e){fe(e)},get:function(){return ce()},enumerable:!0}),Object.defineProperty(a,"backgroundColor",{set:function(e){de(e)},get:function(){return ne()},enumerable:!0}),Object.defineProperty(a,"BackButton",{value:me,enumerable:!0}),Object.defineProperty(a,"MainButton",{value:he,enumerable:!0}),Object.defineProperty(a,"HapticFeedback",{value:_e,enumerable:!0}),a.setHeaderColor=function(e){a.headerColor=e},a.setBackgroundColor=function(e){a.backgroundColor=e},a.enableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!0},a.disableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!1},a.isVersionAtLeast=function(e){return _(e)},a.onEvent=function(e,t){y(e,t)},a.offEvent=function(e,t){C(e,t)},a.sendData=function(e){if(!e||!e.length)throw console.error("[Telegram.WebApp] Data is required",e),Error("WebAppDataInvalid");if(ve(e)>4096)throw console.error("[Telegram.WebApp] Data is too long",e),Error("WebAppDataInvalid");p.postEvent("web_app_data_send",!1,{data:e})},a.switchInlineQuery=function(e,t){if(!_("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+h),Error("WebAppMethodUnsupported");if(!g.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(e=e||"",e.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",e),Error("WebAppInlineQueryInvalid");var r=[];if(t){if(!Array.isArray(t))throw console.error("[Telegram.WebApp] Choose chat types should be an array",t),Error("WebAppInlineChooseChatTypesInvalid");for(var n={users:1,bots:1,groups:1,channels:1},c=0;c<t.length;c++){var v=t[c];if(!n[v])throw console.error("[Telegram.WebApp] Choose chat type is invalid",v),Error("WebAppInlineChooseChatTypeInvalid");n[v]!=2&&(n[v]=2,r.push(v))}}p.postEvent("web_app_switch_inline_query",!1,{query:e,chat_types:r})},a.openLink=function(n,t){var r=document.createElement("A");if(r.href=n,r.protocol!="http:"&&r.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",n),Error("WebAppTgUrlInvalid");var n=r.href;t=t||{},_("6.1")?p.postEvent("web_app_open_link",!1,{url:n,try_instant_view:_("6.4")&&!!t.try_instant_view}):window.open(n,"_blank")},a.openTelegramLink=function(e){var t=document.createElement("A");if(t.href=e,t.protocol!="http:"&&t.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",e),Error("WebAppTgUrlInvalid");if(t.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",e),Error("WebAppTgUrlInvalid");var r=t.pathname+t.search;M||_("6.1")?p.postEvent("web_app_open_tg_link",!1,{path_full:r}):location.href="https://t.me"+r},a.openInvoice=function(e,t){var r=document.createElement("A"),n,c;if(r.href=e,r.protocol!="http:"&&r.protocol!="https:"||r.hostname!="t.me"||!(n=r.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(c=n[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",e),Error("WebAppInvoiceUrlInvalid");if(!_("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+h),Error("WebAppMethodUnsupported");if(V[c])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");V[c]={url:e,callback:t},p.postEvent("web_app_open_invoice",!1,{slug:c})},a.showPopup=function(e,t){if(!_("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+h),Error("WebAppMethodUnsupported");if(F)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var r="",n="",c=[],v={};if(typeof e.title<"u"){if(r=u(e.title),r.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",r),Error("WebAppPopupParamInvalid");r.length>0&&(v.title=r)}if(typeof e.message<"u"&&(n=u(e.message)),!n.length)throw console.error("[Telegram.WebApp] Popup message is required",e.message),Error("WebAppPopupParamInvalid");if(n.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",n),Error("WebAppPopupParamInvalid");if(v.message=n,typeof e.buttons<"u"){if(!Array.isArray(e.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",e.buttons),Error("WebAppPopupParamInvalid");for(var l=0;l<e.buttons.length;l++){var P=e.buttons[l],b={},d="";if(typeof P.id<"u"&&(d=P.id.toString(),d.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",d),Error("WebAppPopupParamInvalid");b.id=d;var w=P.type;if(typeof w>"u"&&(w="default"),b.type=w,!(w=="ok"||w=="close"||w=="cancel"))if(w=="default"||w=="destructive"){var I="";if(typeof P.text<"u"&&(I=u(P.text)),!I.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+w,P.text),Error("WebAppPopupParamInvalid");if(I.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",I),Error("WebAppPopupParamInvalid");b.text=I}else throw console.error("[Telegram.WebApp] Popup button type is invalid",w),Error("WebAppPopupParamInvalid");c.push(b)}}else c.push({id:"",type:"close"});if(c.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(c.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");v.buttons=c,F={callback:t},p.postEvent("web_app_open_popup",!1,v)},a.showAlert=function(e,t){a.showPopup({message:e},t?function(){t()}:null)},a.showConfirm=function(e,t){a.showPopup({message:e,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},t?function(r){t(r=="ok")}:null)},a.showScanQrPopup=function(e,t){if(!_("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+h),Error("WebAppMethodUnsupported");if(B)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var r="",n={};if(typeof e.text<"u"){if(r=u(e.text),r.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",r),Error("WebAppScanQrPopupParamInvalid");r.length>0&&(n.text=r)}B={callback:t},p.postEvent("web_app_open_scan_qr_popup",!1,n)},a.closeScanQrPopup=function(){if(!_("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+h),Error("WebAppMethodUnsupported");B=!1,p.postEvent("web_app_close_scan_qr_popup",!1)},a.readTextFromClipboard=function(e){if(!_("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+h),Error("WebAppMethodUnsupported");var t=pe(16),r={req_id:t};z[t]={callback:e},p.postEvent("web_app_read_text_from_clipboard",!1,r)},a.ready=function(){p.postEvent("web_app_ready")},a.expand=function(){p.postEvent("web_app_expand")},a.close=function(){p.postEvent("web_app_close")},window.Telegram.WebApp=a,Z(),K(),window.addEventListener("resize",o),M&&document.addEventListener("click",s),p.onEvent("theme_changed",$),p.onEvent("viewport_changed",J),p.onEvent("invoice_closed",ye),p.onEvent("popup_closed",Ae),p.onEvent("qr_text_received",Ee),p.onEvent("scan_qr_popup_closed",Pe),p.onEvent("clipboard_text_received",We),p.postEvent("web_app_request_theme"),p.postEvent("web_app_request_viewport")})();
